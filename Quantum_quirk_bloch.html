<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Κβαντικές Πύλες — Παρουσίαση</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --navy:   #0D2137;
    --teal:   #028090;
    --cyan:   #00C2D4;
    --alice:  #9B3DBB;
    --bob:    #1A9A5A;
    --orange: #F09030;
    --dim:    rgba(255,255,255,0.12);
    --dimmer: rgba(255,255,255,0.06);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--navy);
    color: #fff;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  /* ── TOP BAR ── */
  .topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 32px 12px;
    border-bottom: 1px solid var(--dim);
    flex-shrink: 0;
  }
  .topbar-title {
    font-family: 'Space Mono', monospace;
    font-size: 15px;
    color: var(--cyan);
    letter-spacing: 0.08em;
  }
  .topbar-sub {
    font-size: 13px;
    color: rgba(255,255,255,0.4);
  }

  /* Gate selector pills */
  .gate-pills {
    display: flex;
    gap: 8px;
  }
  .pill {
    padding: 6px 18px;
    border-radius: 20px;
    font-family: 'Space Mono', monospace;
    font-size: 13px;
    font-weight: 700;
    border: 2px solid;
    cursor: pointer;
    transition: all .22s cubic-bezier(.4,0,.2,1);
    opacity: 0.4;
    letter-spacing: 0.04em;
  }
  .pill:hover { opacity: 0.75; transform: translateY(-1px); }
  .pill.active { opacity: 1; transform: translateY(-1px); }
  .pill-NOT { border-color: var(--teal);   color: var(--teal); }
  .pill-NOT.active  { background: var(--teal);   color: #fff; }
  .pill-Z   { border-color: var(--alice);  color: var(--alice); }
  .pill-Z.active    { background: var(--alice);  color: #fff; }
  .pill-S   { border-color: var(--orange); color: var(--orange); }
  .pill-S.active    { background: var(--orange); color: #fff; }

  /* ── MAIN STAGE ── */
  .stage {
    flex: 1;
    display: grid;
    grid-template-columns: 1fr 480px 1fr;
    align-items: center;
    padding: 0 24px;
    gap: 0;
    min-height: 0;
  }

  /* ── LEFT: Input + slider ── */
  .left-panel {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    padding-right: 32px;
    gap: 20px;
  }

  .qubit-display {
    text-align: right;
  }
  .qubit-label {
    font-size: 13px;
    color: rgba(255,255,255,0.4);
    letter-spacing: 0.08em;
    font-family: 'Space Mono', monospace;
    margin-bottom: 4px;
  }
  .qubit-value {
    font-family: 'Space Mono', monospace;
    font-size: 64px;
    font-weight: 700;
    color: var(--cyan);
    line-height: 1;
    transition: color .3s;
  }
  .qubit-ket {
    font-size: 22px;
    color: rgba(255,255,255,0.3);
    font-family: 'Space Mono', monospace;
    margin-top: 4px;
  }

  /* Slider */
  .slider-track {
    width: 100%;
    max-width: 260px;
  }
  .slider-track label {
    display: block;
    font-size: 12px;
    color: rgba(255,255,255,0.35);
    text-align: right;
    margin-bottom: 8px;
    font-family: 'Space Mono', monospace;
    letter-spacing: 0.06em;
  }
  input[type=range] {
    -webkit-appearance: none;
    width: 100%;
    height: 4px;
    border-radius: 2px;
    background: var(--dim);
    outline: none;
    cursor: pointer;
  }
  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: var(--cyan);
    border: 3px solid var(--navy);
    box-shadow: 0 0 0 2px var(--cyan);
    transition: background .2s, box-shadow .2s;
  }
  input[type=range]:hover::-webkit-slider-thumb {
    box-shadow: 0 0 0 4px rgba(0,194,212,0.3);
  }
  .slider-ticks {
    display: flex;
    justify-content: space-between;
    margin-top: 6px;
    font-size: 11px;
    color: rgba(255,255,255,0.25);
    font-family: 'Space Mono', monospace;
  }

  /* ── CENTER: Bloch sphere ── */
  .bloch-wrap {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .bloch-wrap canvas {
    filter: drop-shadow(0 0 32px rgba(0,194,212,0.15));
  }

  /* ── RIGHT: Output + formula ── */
  .right-panel {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding-left: 32px;
    gap: 20px;
  }

  .output-display { text-align: left; }

  .output-label {
    font-size: 13px;
    color: rgba(255,255,255,0.4);
    letter-spacing: 0.08em;
    font-family: 'Space Mono', monospace;
    margin-bottom: 4px;
  }
  .output-value {
    font-family: 'Space Mono', monospace;
    font-size: 64px;
    font-weight: 700;
    line-height: 1;
    transition: color .3s, transform .2s;
    color: var(--teal);
  }
  .output-value.pop {
    transform: scale(1.08);
  }
  .output-ket {
    font-size: 22px;
    color: rgba(255,255,255,0.3);
    font-family: 'Space Mono', monospace;
    margin-top: 4px;
  }

  .formula-box {
    background: var(--dimmer);
    border: 1px solid var(--dim);
    border-radius: 12px;
    padding: 14px 20px;
    min-width: 220px;
    transition: border-color .3s;
  }
  .formula-gate {
    font-size: 11px;
    color: rgba(255,255,255,0.35);
    letter-spacing: 0.1em;
    font-family: 'Space Mono', monospace;
    margin-bottom: 6px;
  }
  .formula-eq {
    font-family: 'Space Mono', monospace;
    font-size: 20px;
    font-weight: 700;
    transition: color .3s;
  }
  .formula-step {
    font-size: 14px;
    color: rgba(255,255,255,0.45);
    margin-top: 6px;
    font-family: 'Space Mono', monospace;
    line-height: 1.5;
  }

  /* ── BOTTOM BAR ── */
  .bottombar {
    padding: 12px 32px;
    border-top: 1px solid var(--dim);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 32px;
    flex-shrink: 0;
  }

  .hint-chip {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: rgba(255,255,255,0.35);
  }
  .hint-chip strong {
    font-family: 'Space Mono', monospace;
    font-size: 12px;
    padding: 2px 8px;
    border-radius: 4px;
    background: var(--dim);
    color: rgba(255,255,255,0.7);
  }

  /* Big number animation */
  @keyframes popIn {
    0%   { transform: scale(0.88); opacity: 0.4; }
    60%  { transform: scale(1.1); }
    100% { transform: scale(1);   opacity: 1; }
  }
  .animating { animation: popIn 0.28s cubic-bezier(.4,0,.2,1) forwards; }

</style>
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <div>
    <div class="topbar-title">ΚΒΑΝΤΙΚΕΣ ΠΥΛΕΣ — ΣΥΝΑΡΤΗΣΕΙΣ</div>
    <div class="topbar-sub">Επίλεξε πύλη · Ρύθμισε x₀ · Δες τι κάνει η συνάρτηση</div>
  </div>
  <div class="gate-pills">
    <div class="pill pill-NOT active" onclick="selectGate('NOT',this)">NOT  f(x)</div>
    <div class="pill pill-Z"   onclick="selectGate('Z',this)">Z  g(x)</div>
    <div class="pill pill-S"   onclick="selectGate('S',this)">S  h(x)</div>
  </div>
</div>

<!-- MAIN STAGE -->
<div class="stage">

  <!-- LEFT -->
  <div class="left-panel">
    <div class="qubit-display">
      <div class="qubit-label">ΑΡΧΙΚΟ QUBIT</div>
      <div class="qubit-value" id="val-in">0.60</div>
      <div class="qubit-ket" id="ket-in">|ψ⟩ = |0.60⟩</div>
    </div>
    <div class="slider-track">
      <label>x₀ — σύρε για αλλαγή</label>
      <input type="range" id="slider" min="0" max="100" value="60" oninput="update()">
      <div class="slider-ticks">
        <span>0.0</span><span>0.2</span><span>0.4</span><span>0.6</span><span>0.8</span><span>1.0</span>
      </div>
    </div>
  </div>

  <!-- CENTER: Bloch -->
  <div class="bloch-wrap">
    <canvas id="bloch" width="420" height="420"></canvas>
  </div>

  <!-- RIGHT -->
  <div class="right-panel">
    <div class="output-display">
      <div class="output-label">ΑΠΟΤΕΛΕΣΜΑ</div>
      <div class="output-value" id="val-out">0.40</div>
      <div class="output-ket" id="ket-out">|f(0.60)⟩ = |0.40⟩</div>
    </div>
    <div class="formula-box" id="formula-box">
      <div class="formula-gate" id="formula-gate">ΠΥΛΗ NOT</div>
      <div class="formula-eq"   id="formula-eq">f(x) = 1 − x</div>
      <div class="formula-step" id="formula-step">
        f(0.60) = 1 − 0.60<br>= <strong>0.40</strong>
      </div>
    </div>
  </div>

</div>

<!-- BOTTOM BAR -->
<div class="bottombar">
  <div class="hint-chip"><strong>NOT</strong> f(x) = 1 − x</div>
  <div class="hint-chip">·</div>
  <div class="hint-chip"><strong>Z</strong> g(x) = 2x − 0.4</div>
  <div class="hint-chip">·</div>
  <div class="hint-chip"><strong>S</strong> h(x) = x/2 + 0.3</div>
</div>

<script>
const COLORS = {
  NOT: { main:'#028090', light:'#00C2D4' },
  Z:   { main:'#9B3DBB', light:'#C060E0' },
  S:   { main:'#F09030', light:'#FFB860' },
};

let gate = 'NOT';
let x0   = 0.60;

const FORMULAS = {
  NOT: { label:'ΠΥΛΗ NOT — f(x)', eq:'f(x) = 1 − x',      fn: x => 1-x,           step: (x,r) => `f(${fmt(x)}) = 1 − ${fmt(x)}\n= ${fmt(r)}` },
  Z:   { label:'ΠΥΛΗ Z — g(x)',   eq:'g(x) = 2x − 0.4',   fn: x => 2*x-0.4,       step: (x,r) => `g(${fmt(x)}) = 2×${fmt(x)} − 0.4\n= ${fmt(r)}` },
  S:   { label:'ΠΥΛΗ S — h(x)',   eq:'h(x) = x/2 + 0.3',  fn: x => x/2+0.3,       step: (x,r) => `h(${fmt(x)}) = ${fmt(x)}/2 + 0.3\n= ${fmt(r)}` },
};

function fmt(v){ return v.toFixed(2); }

function selectGate(g, el){
  gate = g;
  document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
  el.classList.add('active');
  update();
}

function update(){
  x0 = document.getElementById('slider').value / 100;
  const info = FORMULAS[gate];
  const result = Math.round(info.fn(x0) * 1000) / 1000;
  const c = COLORS[gate];

  // Left
  document.getElementById('val-in').textContent = fmt(x0);
  document.getElementById('ket-in').textContent = `|ψ₀⟩ = |${fmt(x0)}⟩`;

  // Right — animate number
  const outEl = document.getElementById('val-out');
  outEl.style.color = c.main;
  outEl.textContent = fmt(result);
  outEl.classList.remove('animating');
  void outEl.offsetWidth;
  outEl.classList.add('animating');

  document.getElementById('ket-out').textContent = `|${info.eq.split('(')[0].trim()}(${fmt(x0)})⟩ = |${fmt(result)}⟩`;

  // Formula box
  document.getElementById('formula-box').style.borderColor = c.main;
  document.getElementById('formula-gate').textContent = info.label;
  const eqEl = document.getElementById('formula-eq');
  eqEl.textContent = info.eq;
  eqEl.style.color = c.light;

  const stepLines = info.step(x0, result).split('\n');
  document.getElementById('formula-step').innerHTML =
    stepLines[0] + '<br>' +
    `= <strong style="color:${c.light};font-size:22px;">${fmt(result)}</strong>`;

  // Bloch
  drawBloch(x0, result, c);
}

// ── BLOCH SPHERE ───────────────────────────────────────────
function drawBloch(x0, xOut, c){
  const cv  = document.getElementById('bloch');
  const ctx = cv.getContext('2d');
  const W = cv.width, H = cv.height;
  const cx = W/2, cy = H/2;
  const R  = 170;

  ctx.clearRect(0,0,W,H);

  // ── Background glow
  const grd = ctx.createRadialGradient(cx,cy,0,cx,cy,R);
  grd.addColorStop(0, 'rgba(2,128,144,0.07)');
  grd.addColorStop(1, 'rgba(2,128,144,0)');
  ctx.fillStyle = grd;
  ctx.beginPath(); ctx.arc(cx,cy,R,0,2*Math.PI); ctx.fill();

  // ── Sphere outline
  ctx.beginPath(); ctx.arc(cx,cy,R,0,2*Math.PI);
  ctx.strokeStyle = 'rgba(255,255,255,0.10)';
  ctx.lineWidth = 1.5; ctx.stroke();

  // ── Equator ellipse
  ctx.beginPath();
  ctx.ellipse(cx,cy,R,R*0.22,0,0,2*Math.PI);
  ctx.strokeStyle = 'rgba(255,255,255,0.08)';
  ctx.lineWidth = 1; ctx.stroke();

  // ── Meridian ellipse (vertical)
  ctx.beginPath();
  ctx.ellipse(cx,cy,R*0.22,R,0,0,2*Math.PI);
  ctx.strokeStyle = 'rgba(255,255,255,0.06)';
  ctx.lineWidth = 1; ctx.stroke();

  // ── Axis lines
  ctx.strokeStyle = 'rgba(255,255,255,0.15)';
  ctx.lineWidth = 1;
  // Z axis
  ctx.beginPath(); ctx.moveTo(cx, cy-R-14); ctx.lineTo(cx, cy+R+14); ctx.stroke();
  // X axis
  ctx.beginPath(); ctx.moveTo(cx-R-14, cy); ctx.lineTo(cx+R+14, cy); ctx.stroke();

  // ── Pole labels
  ctx.fillStyle = 'rgba(255,255,255,0.45)';
  ctx.font = 'bold 15px Space Mono, monospace';
  ctx.textAlign = 'center';
  ctx.fillText('|0⟩', cx, cy-R-20);
  ctx.fillText('|1⟩', cx, cy+R+28);

  // ── Map: x ∈ [0,1] → angle from north pole
  // x=0 → north (|0⟩), x=1 → south (|1⟩), x=0.5 → equator
  const toAngle = v => v * Math.PI;

  const a0 = toAngle(x0);
  const a1 = toAngle(Math.max(0, Math.min(1, xOut)));

  // Sphere coordinates (project to 2D: slight perspective tilt)
  const project = (theta) => ({
    x: cx + R * Math.sin(theta) * 0.72,
    y: cy - R * Math.cos(theta),
  });

  const p0 = project(a0);
  const p1 = project(a1);

  // ── Arc trace from north to input
  ctx.beginPath();
  for(let t=0; t<=a0; t+=0.02){
    const p = project(t);
    if(t===0) ctx.moveTo(p.x, p.y);
    else ctx.lineTo(p.x, p.y);
  }
  ctx.strokeStyle = 'rgba(0,194,212,0.18)';
  ctx.lineWidth = 1.5; ctx.stroke();

  // ── Arrow from center to OUTPUT point
  drawArrow(ctx, cx, cy, p1.x, p1.y, c.main, 4);

  // ── Ghost input point
  ctx.beginPath(); ctx.arc(p0.x, p0.y, 6, 0, 2*Math.PI);
  ctx.fillStyle = 'rgba(0,194,212,0.35)';
  ctx.strokeStyle = 'rgba(0,194,212,0.7)';
  ctx.lineWidth = 1.5;
  ctx.fill(); ctx.stroke();

  // Input label
  ctx.fillStyle = 'rgba(0,194,212,0.7)';
  ctx.font = '13px Space Mono, monospace';
  ctx.textAlign = p0.x > cx ? 'left' : 'right';
  ctx.fillText(`x₀=${fmt(x0)}`, p0.x + (p0.x>cx?10:-10), p0.y - 6);

  // ── Output point (bright)
  const grad = ctx.createRadialGradient(p1.x, p1.y, 0, p1.x, p1.y, 14);
  grad.addColorStop(0, c.light);
  grad.addColorStop(1, c.main+'00');
  ctx.fillStyle = grad;
  ctx.beginPath(); ctx.arc(p1.x, p1.y, 14, 0, 2*Math.PI); ctx.fill();

  ctx.beginPath(); ctx.arc(p1.x, p1.y, 9, 0, 2*Math.PI);
  ctx.fillStyle = c.light;
  ctx.shadowColor = c.light; ctx.shadowBlur = 18;
  ctx.fill();
  ctx.shadowBlur = 0;

  // Output label
  ctx.fillStyle = c.light;
  ctx.font = 'bold 15px Space Mono, monospace';
  ctx.textAlign = p1.x > cx ? 'left' : 'right';
  ctx.fillText(`→ ${fmt(xOut)}`, p1.x + (p1.x>cx?14:-14), p1.y + 5);
}

function drawArrow(ctx, x1, y1, x2, y2, color, lw){
  const angle = Math.atan2(y2-y1, x2-x1);
  const len = Math.hypot(x2-x1, y2-y1);
  const headLen = 14;

  // Line
  ctx.beginPath();
  ctx.moveTo(x1,y1);
  ctx.lineTo(x2 - headLen*0.7*Math.cos(angle), y2 - headLen*0.7*Math.sin(angle));
  ctx.strokeStyle = color;
  ctx.lineWidth = lw;
  ctx.lineCap = 'round';
  ctx.shadowColor = color; ctx.shadowBlur = 10;
  ctx.stroke();
  ctx.shadowBlur = 0;

  // Arrowhead
  ctx.beginPath();
  ctx.moveTo(x2, y2);
  ctx.lineTo(x2 - headLen*Math.cos(angle - Math.PI/7), y2 - headLen*Math.sin(angle - Math.PI/7));
  ctx.lineTo(x2 - headLen*Math.cos(angle + Math.PI/7), y2 - headLen*Math.sin(angle + Math.PI/7));
  ctx.closePath();
  ctx.fillStyle = color;
  ctx.fill();
}

// Init
update();
</script>
</body>
</html>
